!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("MedalliaForms",[],a):"object"==typeof exports?exports.MedalliaForms=a():e.MedalliaForms=a()}(self,(()=>(()=>{"use strict";var e={d:(a,o)=>{for(var r in o)e.o(o,r)&&!e.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:o[r]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};e.r(a),e.d(a,{MarketoFormClient:()=>x,PageDefaults:()=>G});const o=(e,a)=>((e,a)=>{console.error("!!!!!! Error Information For "+e+":"),console.dir(JSON.stringify(a,null,1)),console.error("!!!!!!")})(e,a),r=(e,a)=>((e,a)=>{console.info("****** Information for "+e+":"),console.info(JSON.stringify(a,null,1)),console.info("******")})(e,a),i={leadSource:"source",poi:"utm_product_of_interest"},n={internalReferrer:{campaign:"FY25_WebsiteReferralLead",leadSource:"Marketing - Website",medium:"medallia.com"},organic:{campaign:"FY25_organic-search",leadSource:"Marketing - Search",medium:"organic-search"},paid:{campaign:"FY25_paid",leadSource:"Marketing - Paid",medium:"paid"},referrer:{campaign:"FY25_external_web_referral",leadSource:"FY25_external_web_referral",medium:"referral"}},t={external:"external",internal:"internal",none:"none"},s={organic:"organic",paid:"ads"},l={bing:"bing.com",facebook:"facebook.com",google:"www.google.com",instagram:"instagram.com",linkedIn:"linkedIn.com",twitter:"twitter.com"},c={bingAds:"msclkid",campaign:"utm_campaign",content:"utm_content",facebookAds:"fbclid",googleAds:"gclid",medium:"utm_medium",source:"utm_source",term:"utm_term"},m=e=>(e=>e&&e.size>0)(e),d=e=>{var a=!1;return e.toLowerCase().includes(s.organic)&&(a=!0),a},g=e=>{var a=!1;return e.toLowerCase().includes(s.paid)&&(a=!0),a},u=e=>{let a="";return e?(r("Setting Page Campaign",e),a=e):(r("Setting Default Campaign",n.internalReferrer.campaign),a=n.internalReferrer.campaign),a},f=e=>{let a="";return e?(r("Setting Page Lead Source",e),a=e):(r("Setting Default Lead Source",n.internalReferrer.leadSource),a=n.internalReferrer.leadSource),a},y=e=>{let a="";return e?(r("Setting Page Medium",e),a=e):(r("Setting Default Medium",n.internalReferrer.medium),a=n.internalReferrer.medium),a},b=(e,a,o,i)=>((e,a,o,i)=>{let s="";return r("Params Are",o),m(o)&&(r("Processing Campaign From Params",o),s=o.get(c.campaign)),g(a)?(r("Processing Campaign From Paid Source",a),s||(s=n.paid.campaign)):d(a)?(r("Processing Campaign From Organic Source",a),s||(s=n.organic.campaign)):e!==t.none?(r("Referrer Type",e),e===t.external?s||(s=n.referrer.campaign):s||(s=u(i))):s||(s=u(i)),r("Param Campaign Value",s),s})(e,a,o,i),p=e=>(e=>{let a="";return m(e)&&(a=e.get(c.content)),r("Param Content Value",a),a})(e),k=(e,a,o,s)=>((e,a,o,s)=>{let l="";return m(o)&&(l=o.get(i.leadSource)),g(a)?l||(l=n.paid.leadSource):d(a)?l||(l=n.organic.leadSource):e!==t.none?(r("Referrer Type",e),e===t.external?l||(l=n.referrer.leadSource):l||(l=f(s))):l||(l=f(s)),r("Param Lead Source Value",l),l})(e,a,o,s),S=(e,a,o,i)=>((e,a,o,i)=>{let s="";return m(o)&&(s=o.get(c.medium)),g(a)?s||(s=n.paid.medium):d(a)?s||(s=n.organic.medium):e!==t.none?(r("Referrer Type",e),e===t.external?s||(s=n.referrer.medium):s||(s=y(i))):s||(s=y(i)),r("Param Medium Value",s),s})(e,a,o,i),L=(e,a)=>((e,a)=>{let o="";return m(e)?o=e.get(i.poi):a&&(o=a),r("Param POI Value",o),o})(e,a),w=e=>(e=>{let a="";return m(e)&&(a=e.get(c.term)),r("Param Term Value",a),a})(e),_=()=>(()=>{const e=document.referrer;let a;return e&&(a=new URL(e)),a})(),M={Names:{bing:{bing:"bing",bingDiplay:"bing-display",bingRemarketing:"bing-remarketing",bingSearch:"bing-search",bingVideo:"bing-video",microsoft:"microsoft",microsoftDisplay:"microsoft-display",microsoftRemarketing:"microsoft-remarketing",microsoftSearch:"microsoft-search",microsoftVideo:"microsoft-video"},facebook:{discovery:"facebook-discovery",display:"facebook-display",facebook:"facebook",remarketing:"facebook-remarketing"},google:{discovery:"google-discovery",display:"google-display",google:"google",remarketing:"google-remarketing",search:"google-search",video:"google-video"},instagram:{discovery:"instagram-discovery",display:"instagram-display",instagram:"instagram",remarketing:"instagram-remarketing"},linkedin:{discovery:"linkedin-discovery",display:"linkedin-display",linkedin:"linkedin",remarketing:"linkedin-remarketing"}},Values:{bing:{bing:"Microsoft Ads",bingDiplay:"Microsoft Ads Display",bingRemarketing:"Microsoft Ads Remarketing",bingSearch:"Microsoft Ads Search",bingVideo:"Microsoft Ads Video",organic:"Bing Organic"},facebook:{discovery:"Facebook Ads Discovery",display:"Facebook Ads Display",facebook:"Facebook Ads",organic:"Facebook Organic",remarketing:"Facebook Ads Remarketing"},google:{discovery:"Google Ads Discovery",display:"Google Ads Display",google:"Google Ads",organic:"Google Organic",remarketing:"Google Ads Remarketing",search:"Google Ads Search",video:"Google Ads Video"},instagram:{discovery:"Instagram Ads Discovery",display:"Instagram Ads Display",instagram:"Instagram Ads",organic:"Instagram Organic",remarketing:"Instagram Ads Remarketing"},linkedin:{discovery:"Linkedin Ads Discovery",display:"Linkedin Ads Display",linkedin:"Linkedin Ads",organic:"Linkedin Organic",remarketing:"Linkedin Ads Remarketing"}}},V=(e,a)=>{let o=!1;return e&&a&&a.get(e)&&(o=!0),o},v=(e,a,o)=>((e,a,o)=>{let i,n;return m(e)&&(n=e.get(c.source),r("Processing UTM Source From Params",n)),i=((e,a,o)=>{let i;if(e){let a=e.toLowerCase();a.includes(M.Names.bing.bingDiplay)||e.includes(M.Names.bing.microsoftDisplay)?i=M.Values.bing.bingDiplay:a.includes(M.Names.bing.bingRemarketing)||e.includes(M.Names.bing.microsoftRemarketing)?i=M.Values.bing.bingRemarketing:a.includes(M.Names.bing.bingSearch)||e.includes(M.Names.bing.microsoftSearch)?i=M.Values.bing.bingSearch:a.includes(M.Names.bing.bingVideo)||e.includes(M.Names.bing.microsoftVideo)?i=M.Values.bing.bingVideo:V(c.bingAds,o)&&(i=i=M.Values.bing.bing)}else o&&V(c.bingAds,o)?i=M.Values.bing.bing:a&&(r("URL IS",a),a.host.toLowerCase().includes(l.bing)&&(i=M.Values.bing.organic));return i})(n,a,e),i||(i=((e,a,o)=>{let r;if(e){let a=e.toLowerCase();a.includes(M.Names.facebook.discovery)?r=M.Values.facebook.discovery:a.includes(M.Names.facebook.display)?r=M.Values.facebook.display:a.includes(M.Names.facebook.remarketing)?r=M.Values.facebook.remarketing:(a.includes(M.Names.facebook.facebook)||V(c.facebookAds,o))&&(r=M.Values.facebook.facebook)}else o&&V(c.facebookAds,o)?r=M.Values.facebook.facebook:a&&a.host.toLowerCase().includes(l.facebook)&&(r=M.Values.facebook.organic);return r})(n,a,e)),i||(i=((e,a,o)=>{let r;if(e){let a=e.toLowerCase();a.includes(M.Names.google.discovery)?r=M.Values.google.discovery:a.includes(M.Names.google.display)?r=M.Values.google.display:a.includes(M.Names.google.remarketing)?r=M.Values.google.remarketing:a.includes(M.Names.google.search)?r=M.Values.googles.earch:a.includes(M.Names.google.video)?r=M.Values.google.video:(a.includes(M.Names.google.google)||V(c.googleAds,o))&&(r=M.Values.google.google)}else o&&V(c.googleAds,o)?r=M.Values.google.google:a&&a.host.toLowerCase().includes(l.google)&&(r=M.Values.google.organic);return r})(n,a,e)),i||(i=((e,a,o)=>{let r;if(e){let a=e.toLowerCase();a.includes(M.Names.instagram.discovery)?r=M.Values.instagram.discovery:a.includes(M.Names.instagram.display)?r=M.Values.instagram.display:a.includes(M.Names.instagram.remarketing)?r=M.Values.instagram.remarketing:a.includes(M.Names.instagram.instagram)&&(r=M.Values.instagram.instagram)}else a&&a.host.toLowerCase().includes(l.instagram)&&(r=M.Values.instagram.organic);return r})(n,a)),i||(i=((e,a,o)=>{let r;if(e){let a=e.toLowerCase();a.includes(M.Names.linkedin.discovery)?r=M.Values.linkedin.discovery:a.includes(M.Names.linkedin.display)?r=M.Values.linkedin.display:a.includes(M.Names.linkedin.remarketing)?r=M.Values.linkedin.remarketing:a.includes(M.Names.linkedin.linkedin)&&(r=M.Values.linkedin.linkedin)}else a&&a.host.toLowerCase().includes(l.linkedIn)&&(r=M.Values.linkedin.organic);return r})(n,a)),i||(i=n),r("User Source",i),i||(i=a?a.hostname:o||"Direct"),r("User Source After Processing",i),i})(e,a,o),N="medallia_process_utms";let A={campaign:"",content:"",leadSource:"",medium:"",poi:"",source:"",term:""};const D=(e,a)=>{const o=new URL(document.location);let r,i=t.none;const n=_();m(o.searchParams)?r=o.searchParams:!r&&n&&n.searchParams&&(r=n.searchParams),n&&(i=n.hostname===window.location.hostname?t.internal:t.external);const s=v(r,n,e.utmSource);A.campaign=b(i,s,r,e.campaign),A.content=p(r),A.leadSource=k(i,s,r,e.leadSource),A.medium=S(i,s,r,e.medium),A.poi=L(r,e.poi),A.source=s,A.term=w(r),a?process.browser&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:N,utmValues:A})):(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:N,utmValues:A}))},h=(e,a,o,r)=>((e=90,a,o,r="")=>{const i=new Date,n=new Date(i.getTime()+24*e*60*60*1e3).toUTCString();if(r){const e=a+"="+o+"; domain="+r+"; expires="+n+"; SameSite=Strict; Strict";document.cookie=e}else{const e=a+"="+o+"; expires="+n+"; SameSite=Strict; Strict";document.cookie=e}})(e,a,o,r);class P{static ApiAvailable=new P("apiAvailable");static Loading=new P("loading");static NotAvailable=new P("notAvailable");static Ready=new P("ready");constructor(e){this.name=e}}const R=P,T={gtmContainerIds:["GTM-MMGQZFH6","GTM-M899Q69F"],utmDataLayerVariableName:"utmValues",UtmDataLayerNames:{leadSource:"leadSource",utmCampaign:"campaign",utmContent:"content",utmMedium:"medium",utmSource:"source",utmTerm:"term"}},C=()=>{let e;return T.gtmContainerIds.forEach((a=>{if(window.google_tag_manager[a])return e=window.google_tag_manager[a],e})),e},F={conversionPage:window.location,campaign:()=>(()=>{let e=n.internalReferrer.campaign;try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.utmCampaign],null!=e&&"undefined"!==e||(e=n.internalReferrer.campaign)}catch(e){o("Cannot Process GTM Datalayer",e)}return r("UTM CAMPAIGN",e),e})(),content:()=>(()=>{let e="";try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.utmContent],null!=e&&"undefined"!==e||(e="")}catch(e){o("Cannot Process GTM Datalayer",e)}return r("UTM Content",e),e})(),leadSource:()=>(()=>{let e=n.internalReferrer.leadSource;try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.leadSource],null!=e&&"undefined"!==e||(e=n.internalReferrer.leadSource)}catch(e){o("Cannot Process GTM Datalayer",e)}return r("Lead Source",e),e})(),medium:()=>(()=>{let e=n.internalReferrer.medium;try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.utmMedium],null!=e&&"undefined"!==e||(e=n.internalReferrer.medium)}catch(e){o("Cannot Process GTM Datalayer",e)}return r("UTM Medium",e),e})(),term:()=>(()=>{let e="";try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.utmTerm],null!=e&&"undefined"!==e||(e="")}catch(e){o("Cannot Process GTM Datalayer",e)}return r("UTM Term",e),e})(),utmSource:()=>(()=>{let e="medallia.com";try{e=C().dataLayer.get(T.utmDataLayerVariableName)[T.UtmDataLayerNames.utmSource],null!=e&&"undefined"!==e||(e="medallia.com")}catch(e){o("Cannot Process GTM Datalayer",e)}return r("UTM Source",e),e})()},U=()=>{h(90,"demoSubmitted","true")},I=(e,a,o)=>{setTimeout((()=>{I.done||(document.removeEventListener("load",I,!0),o(R.NotAvailable),r("API NOT FOUND",O.state))}),5e3),"object"!=typeof MktoForms2?(document.addEventListener("load",I,!0),r("API NOT FOUND",O.state)):I.done||(document.removeEventListener("load",I,!0),I.done=!0,r("API FOUND",O.state),((e,a,o)=>{MktoForms2.loadForm("//go2.medallia.com","141-HJW-872",e,(e=>{if(null!=e){const o=e.getId();r("Loading Form",o),e.onSubmit((function(e){return r("Submitting Form",o),(e=>{console.log("IN SUBMITE - UTMS ARE"),console.log("Campaign "+F.campaign()),console.log("UTM Source: "+F.utmSource()),console.log("Lead Source: "+F.leadSource()),console.log("Medium: "+F.medium()),e.vals({LeadSource:F.leadSource(),UTM_Campaign_Most_Recent__c:F.campaign(),UTM_Content_Most_Recent__c:F.content(),UTM_Source_Most_Recent__c:F.utmSource(),UTM_Medium_Most_Recent__c:F.medium(),UTM_Term_Most_Recent__c:F.term(),Conversion_Page_Most_Recent__c:F.conversionPage}),r("UTM Values Set")})(e),!1})),e.onSuccess((i=>{const n=e.getValues();let t="";return n&&n.Email&&(t=n.Email),r("Form Submitted Successfully",o),(e=>[1018,1236,1237,1238,1239,1240,1241,1242,2074,3827].includes(e))(o)?dataLayer.push({event:"mkto.form.sales.success",form_id:o,user_data:{email:t}}):dataLayer.push({event:"mkto.form.success",form_id:o,user_data:{email:t}}),a(),(e=>{window.location.pathname.includes("/demo/")&&[1018,3827].includes(e)&&(window.dataLayer.push({event:"demoFormSubmitted"}),U(),window.KAMPYLE_ONSITE_SDK&&"function"==typeof window.KAMPYLE_ONSITE_SDK.updatePageView&&window.KAMPYLE_ONSITE_SDK.updatePageView())})(o),!1}))}else O.state=R.NotAvailable,o(R.NotAvailable)})),MktoForms2.whenReady((function(a){const i=a.getId();r("FORM READY",i),null!=a&&i==e&&(document.querySelectorAll(".mktoFormRow .mktoCheckboxList").forEach((e=>{e.closest(".mktoFormRow").classList.add("medallia-checkbox-row")})),r("Form Loaded",i),O.state=R.Ready,o(R.Ready))}))})(e,a,o))},O={init:(e,a,o)=>{((e,a,o)=>{I(e,a,o)})(e,a,o)},state:R.Loading},E=O,G=class{campaign="";leadSource="";medium="";poi="";utmSource=""},x={setDataLayerUtms:(e,a)=>{D((e=>{console.log("Page Defaults"),console.log(e);let a=new G;return e&&e instanceof G?e:a})(e),a)},loadForm:(e,a,o)=>{r("Loading form from client"),E.init(e,a,o)}};return a})()));